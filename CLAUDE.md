# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Sanskrit text search tool that recursively searches through `.doc` and `.docx` files in directory structures to find specific text patterns. The main script was generated by OpenAI's 4o model as a "vibe coding" exercise.

## Core Architecture

- **Main Script**: `sanskrit_search.sh` - Shell script that orchestrates the entire search process
- **Text Extraction**: Uses two external tools for document processing:
  - `antiword` for .doc files (must be installed via Homebrew)
  - `docx2txt` for .docx files (included as a Perl script in the repository)
- **Search Logic**: Uses `ggrep` with Perl regex support for case-insensitive pattern matching with context lines

## Dependencies

The script requires these tools to be available on the PATH:
- `antiword` - Install with `brew install antiword`
- `docx2txt` - Included in the repository as an executable Perl script
- `ggrep` - GNU grep (available by default on macOS)
- `iconv` - For character encoding conversion (system utility)

## Usage

Run the search tool from the repository root:
```bash
./sanskrit_search.sh <directory_path> <search_string>
```

Examples:
- `./sanskrit_search.sh ~/Downloads/Nīti\ Texts zatr`
- `./sanskrit_search.sh ~/Downloads/Niti\ Texts śatr`

## Key Implementation Details

- **Encoding**: Script sets UTF-8 locale (`LC_ALL=en_US.UTF-8`) to handle Sanskrit and Unicode text
- **Text Processing**: 
  - .doc files: `antiword` → `iconv` conversion from ISO-8859-1 to UTF-8
  - .docx files: `docx2txt` direct extraction
- **Search**: `ggrep -i -C 2 --color=always -P` for case-insensitive Perl regex with 2 lines of context
- **File Discovery**: Uses `find` to locate all .doc and .docx files recursively

## Data Structure

The repository includes a large collection of Sanskrit texts in the `Nīti Texts/` directory:
- Mahābhārata texts (18 files)
- Rāmāyaṇa texts (7 files) 
- Nītiśāstras (various treatises)
- Aśvaghoṣa works
- Dharmasūtras and Dharmaśāstras

## Development Notes

- The script includes comprehensive error handling and user feedback
- Output includes file counts, processing status, and match summaries
- Uses colored output for better terminal readability
- Designed to run from the repository directory to access the bundled `docx2txt` script