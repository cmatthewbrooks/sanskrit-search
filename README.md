# Sanskrit Search

A simple tool to find text in a directory of Sanskrit documents

## Overview

This was a fun exercise in "vibe coding" to whip up a quick script to help with a project
typically outside my norm. The `sanskrit_search.sh` script was generated by OpenAI's 4o
model with minimal edits needed using the following prompt:

```
Write a shell script that takes a directory path and a search string as arguments,
recursively searches the .doc and .docx files in the directory structure, and prints
the file name and the surrounding line of text where the search string argument is found.
```

## Installation and Dependencies

The script requires two dependencies to uniformly handle `.doc` and `.docx` files:
* `antiword` to handle .doc files (a binary document format)
* `docx2txt` to handle .docx files (an archive-based document format)

Generally-speaking, you can run the `sanskrit_search.sh` script as long as these two
dependencies are located somewhere on your `PATH`.

### Antiword

[Antiword](https://github.com/grobian/antiword) is old software, but it is packaged
to be [installed through Homebrew](https://github.com/Homebrew/homebrew-core/blob/57eb37b37b123b40641b6d067744e99c247678a7/Formula/a/antiword.rb). For those unfamiliar, Homebrew is arguably the most common package manager for macOS. You can find the instructions for installing Homebrew [here](https://brew.sh).

Assuming you have `brew` installed, you can run the following command from your terminal:
```
> brew install antiword
```

### docx2txt

Docx2txt is a stand-alone Perl script that can run natively on macOS. We include it in this
repository, so you can either copy it elsewhere on your `PATH` or leave it here and run the 
`sanskrit_search.sh` script from this repository location.

## Usage

As long as `antiword` is installed on your `PATH` (most likely installed via `brew` as described
earlier), the simplest way to run this tool is from the root of this repository. While you can
technically save the output to a txt file, your terminal's color coding is likely to make this
the most useful.

```
# Navigate to this repository (either after running `git clone` or downloading from the UI)
> cd sanskrit-search

# Test run to get the Usage
> ./sanskrit_search.sh
Usage: ./sanskrit_search.sh <directory_path> <search_string>

# Search plain-text
> ./sanskrit_search.sh Nīti\ Texts zatr
...
-----------------------------------
Processing: /Users/cmb/Downloads/Nīti Texts/Mahābhārata/17 mahaaprasthaanika.docx
0170020201/.anRtam.na.smaraamy.asya.svaireSv.api.mahaatmanah./
0170020203/.atha.kasya.vikaaro.ayam.yena.ayam.patito.bhuvi.//20
0170020211/.eka.ahnaa.nirdaheyam.vai.zatruun.ity.arjuno.abraviit./{Y}
0170020213/.na.ca.tat.kRtavaan.eSa.zuura.maanii.tato.apatat.//
0170020221/.avamene.dhanur.graahaan.eSa.sarvaamz.ca.phalgunah./
File: /Users/cmb/Downloads/Nīti Texts/Mahābhārata/17 mahaaprasthaanika.docx
-----------------------------------
...

# Or search using characters from the extended keyboard:
> ./sanskrit_search.sh Niti\ Texts śatr
...
-----------------------------------
Processing: /Users/cmb/Downloads/Nīti Texts/Nītiśāstras/Nītisāra of Kāmandaki.docx
   lobhād ailas tu rājarṣir vātāpir harṣato 'suraḥ ||58||
   paulastyo rākṣaso mānān madād dambhodbhavo nṛpaḥ |
   prayātā nidhanaṃ hy ete śatruṣaḍvargam āśritāḥ ||59||
   śatruṣaḍvargam utsṛjya jāmadagnyo jitendriyaḥ |
   ambarīṣaś ca mahābhāgo bubhujāte ciraṃ mahīm ||60||

--
...

# You can also search wildcards within a single word using the "*" character.
# Note: When searching a wildcard, you should enclose the search term in quotes.
> ./sanskrit_search.sh Niti\ Texts "daṇḍa*mitr"
...
Processing: Nīti Texts/Nītiśāstras/cākṣuṣīya transcription final.docx
ataḥ paraṃ sutrārthaṃ vartayiṣyāmaḥ |

[1] sapta prakṛtaya iti -- tadyathā -- [1]svāmy[2]amātya[3]janapada[4]durga[5]kośa[6]daṇḍa[7]mitrāṇi | atra ślokau --

 [1]svāmī svāmyanugo [2]'mātyo [3]rāṣṭraṃ ca snigdhasajjanam |
 ...

 # Lastly, you can search multiple terms within a specified line count.
 # In this example, we search "ari" and "mitr" within 3 lines of each other.
 # Note: you can still search characters from the extended keyboard as well as wildcards.
> ./sanskrit_search.sh Nīti\ Texts 3 ari mitr
 ...
Processing: Nīti Texts/Rāmāyaṇa/Rāmāyaṇa 4.docx


4.001.001a sa tāṃ puṣkariṇīṃ gatvā padmotpalajhaṣākulām
4.001.001c rāmaḥ saumitrisahito vilalāpākulendriyaḥ
4.001.002a tasya dṛṣṭvaiva tāṃ harṣād indriyāṇi cakampire
4.001.002c sa kāmavaśam āpannaḥ saumitrim idam abravīt
File: Nīti Texts/Rāmāyaṇa/Rāmāyaṇa 4.docx
 ...
```
